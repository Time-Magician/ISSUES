{"ast":null,"code":"import config from 'config';\nimport { postRequest, postRequest_v2 } from \"../utils/ajax\";\nimport { history } from '../utils/history';\nimport { message } from 'antd';\nimport axios from \"axios\";\nexport const login = data => {\n  const url = \"http://localhost:9000/user-service/login?credentials=\" + data.username + \"&client_id=issuesApp&client_secret=sjtu&password=\" + data.password + \"&grant_type=password\";\n  console.log(url); // let myHeaders = new Headers({\n  //     'Access-Control-Allow-Origin': '*',\n  //     'Content-Type': 'application/json;charset=UTF-8'\n  // });\n  // fetch(url, {\n  //     method: 'GET',\n  //     headers: myHeaders,\n  //     mode: 'no-cors',\n  // }) .then((res) => {\n  //     // TODO\n  //     console.log(res.body);\n  // })\n\n  var axios = require('axios');\n\n  var config = {\n    method: 'get',\n    url: url,\n    headers: {}\n  };\n\n  if (data.status >= 0) {\n    localStorage.setItem('user', JSON.stringify(data.data));\n    history.push(\"/\");\n    message.success(data.msg);\n  } else {\n    message.error(data.msg);\n  }\n\n  axios(config).then(function (response) {\n    console.log(JSON.stringify(response.data.data));\n  }).catch(function (error) {\n    console.log(error);\n  });\n};","map":{"version":3,"sources":["C:/Users/yy/Desktop/fronted/src/services/userService.js"],"names":["config","postRequest","postRequest_v2","history","message","axios","login","data","url","username","password","console","log","require","method","headers","status","localStorage","setItem","JSON","stringify","push","success","msg","error","then","response","catch"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,SAAQC,WAAR,EAAqBC,cAArB,QAA0C,eAA1C;AACA,SAAQC,OAAR,QAAsB,kBAAtB;AACA,SAAQC,OAAR,QAAsB,MAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,KAAK,GAAIC,IAAD,IAAU;AAC3B,QAAMC,GAAG,GAAG,0DAAwDD,IAAI,CAACE,QAA7D,GAAsE,mDAAtE,GAA0HF,IAAI,CAACG,QAA/H,GAAwI,sBAApJ;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ,EAF2B,CAG3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAIH,KAAK,GAAGQ,OAAO,CAAC,OAAD,CAAnB;;AAEA,MAAIb,MAAM,GAAG;AACTc,IAAAA,MAAM,EAAE,KADC;AAETN,IAAAA,GAAG,EAAEA,GAFI;AAGTO,IAAAA,OAAO,EAAE;AAHA,GAAb;;AAMA,MAAGR,IAAI,CAACS,MAAL,IAAe,CAAlB,EAAqB;AACjBC,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeb,IAAI,CAACA,IAApB,CAA7B;AACAJ,IAAAA,OAAO,CAACkB,IAAR,CAAa,GAAb;AACAjB,IAAAA,OAAO,CAACkB,OAAR,CAAgBf,IAAI,CAACgB,GAArB;AACH,GAJD,MAKI;AACAnB,IAAAA,OAAO,CAACoB,KAAR,CAAcjB,IAAI,CAACgB,GAAnB;AACH;;AAEDlB,EAAAA,KAAK,CAACL,MAAD,CAAL,CACKyB,IADL,CACU,UAAUC,QAAV,EAAoB;AACtBf,IAAAA,OAAO,CAACC,GAAR,CAAYO,IAAI,CAACC,SAAL,CAAeM,QAAQ,CAACnB,IAAT,CAAcA,IAA7B,CAAZ;AACH,GAHL,EAIKoB,KAJL,CAIW,UAAUH,KAAV,EAAiB;AACpBb,IAAAA,OAAO,CAACC,GAAR,CAAYY,KAAZ;AACH,GANL;AAQH,CAzCM","sourcesContent":["import config from 'config';\r\nimport {postRequest, postRequest_v2} from \"../utils/ajax\";\r\nimport {history} from '../utils/history';\r\nimport {message} from 'antd';\r\nimport axios from \"axios\"\r\n\r\nexport const login = (data) => {\r\n    const url = \"http://localhost:9000/user-service/login?credentials=\"+data.username+\"&client_id=issuesApp&client_secret=sjtu&password=\"+data.password+\"&grant_type=password\";\r\n    console.log(url);\r\n    // let myHeaders = new Headers({\r\n    //     'Access-Control-Allow-Origin': '*',\r\n    //     'Content-Type': 'application/json;charset=UTF-8'\r\n    // });\r\n    // fetch(url, {\r\n    //     method: 'GET',\r\n    //     headers: myHeaders,\r\n    //     mode: 'no-cors',\r\n    // }) .then((res) => {\r\n    //     // TODO\r\n    //     console.log(res.body);\r\n    // })\r\n\r\n    var axios = require('axios');\r\n\r\n    var config = {\r\n        method: 'get',\r\n        url: url,\r\n        headers: { }\r\n    };\r\n\r\n    if(data.status >= 0) {\r\n        localStorage.setItem('user', JSON.stringify(data.data));\r\n        history.push(\"/\");\r\n        message.success(data.msg);\r\n    }\r\n    else{\r\n        message.error(data.msg);\r\n    }\r\n\r\n    axios(config)\r\n        .then(function (response) {\r\n            console.log(JSON.stringify(response.data.data));\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n        });\r\n\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"module"}