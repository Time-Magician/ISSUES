{"ast":null,"code":"import config from 'config';\nimport { postRequest, postRequest_v2 } from \"../utils/ajax\";\nimport { history } from '../utils/history';\nimport { message } from 'antd';\nimport axios from \"axios\";\nexport const login = data => {\n  const url = \"http://localhost:9000/user-service/login?credentials=\" + data.username + \"&client_id=issuesApp&client_secret=sjtu&password=\" + data.password + \"&grant_type=password\";\n  console.log(url);\n\n  var axios = require('axios');\n\n  var config = {\n    method: 'get',\n    url: url,\n    headers: {}\n  };\n  axios(config).then(function (response) {\n    console.log(JSON.stringify(response.data.data));\n\n    if (response.data.status >= 0) {\n      localStorage.setItem('user', JSON.stringify(response.data.data));\n      history.push(\"/\");\n      message.success(response.data.msg);\n    } else {\n      message.error(response.data.msg);\n    }\n  }).catch(function (error) {\n    console.log(error);\n  });\n};","map":{"version":3,"sources":["C:/Users/yy/Desktop/fronted/src/services/userService.js"],"names":["config","postRequest","postRequest_v2","history","message","axios","login","data","url","username","password","console","log","require","method","headers","then","response","JSON","stringify","status","localStorage","setItem","push","success","msg","error","catch"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,SAAQC,WAAR,EAAqBC,cAArB,QAA0C,eAA1C;AACA,SAAQC,OAAR,QAAsB,kBAAtB;AACA,SAAQC,OAAR,QAAsB,MAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,KAAK,GAAIC,IAAD,IAAU;AAC3B,QAAMC,GAAG,GAAG,0DAAwDD,IAAI,CAACE,QAA7D,GAAsE,mDAAtE,GAA0HF,IAAI,CAACG,QAA/H,GAAwI,sBAApJ;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;;AAEA,MAAIH,KAAK,GAAGQ,OAAO,CAAC,OAAD,CAAnB;;AAEA,MAAIb,MAAM,GAAG;AACTc,IAAAA,MAAM,EAAE,KADC;AAETN,IAAAA,GAAG,EAAEA,GAFI;AAGTO,IAAAA,OAAO,EAAE;AAHA,GAAb;AAMAV,EAAAA,KAAK,CAACL,MAAD,CAAL,CACKgB,IADL,CACU,UAAUC,QAAV,EAAoB;AACtBN,IAAAA,OAAO,CAACC,GAAR,CAAYM,IAAI,CAACC,SAAL,CAAeF,QAAQ,CAACV,IAAT,CAAcA,IAA7B,CAAZ;;AACA,QAAGU,QAAQ,CAACV,IAAT,CAAca,MAAd,IAAwB,CAA3B,EAA8B;AAC1BC,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BJ,IAAI,CAACC,SAAL,CAAeF,QAAQ,CAACV,IAAT,CAAcA,IAA7B,CAA7B;AACAJ,MAAAA,OAAO,CAACoB,IAAR,CAAa,GAAb;AACAnB,MAAAA,OAAO,CAACoB,OAAR,CAAgBP,QAAQ,CAACV,IAAT,CAAckB,GAA9B;AACH,KAJD,MAKI;AACArB,MAAAA,OAAO,CAACsB,KAAR,CAAcT,QAAQ,CAACV,IAAT,CAAckB,GAA5B;AACH;AACJ,GAXL,EAYKE,KAZL,CAYW,UAAUD,KAAV,EAAiB;AACpBf,IAAAA,OAAO,CAACC,GAAR,CAAYc,KAAZ;AACH,GAdL;AAgBH,CA5BM","sourcesContent":["import config from 'config';\r\nimport {postRequest, postRequest_v2} from \"../utils/ajax\";\r\nimport {history} from '../utils/history';\r\nimport {message} from 'antd';\r\nimport axios from \"axios\"\r\n\r\nexport const login = (data) => {\r\n    const url = \"http://localhost:9000/user-service/login?credentials=\"+data.username+\"&client_id=issuesApp&client_secret=sjtu&password=\"+data.password+\"&grant_type=password\";\r\n    console.log(url);\r\n\r\n    var axios = require('axios');\r\n\r\n    var config = {\r\n        method: 'get',\r\n        url: url,\r\n        headers: { }\r\n    };\r\n\r\n    axios(config)\r\n        .then(function (response) {\r\n            console.log(JSON.stringify(response.data.data));\r\n            if(response.data.status >= 0) {\r\n                localStorage.setItem('user', JSON.stringify(response.data.data));\r\n                history.push(\"/\");\r\n                message.success(response.data.msg);\r\n            }\r\n            else{\r\n                message.error(response.data.msg);\r\n            }\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n        });\r\n\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"module"}